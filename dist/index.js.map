{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 968f06e69c2f758a7f16","webpack:///./src/model.ts","webpack:///./src/associations/association.ts","webpack:///./src/yongo.ts","webpack:///./src/associations/one-to-many.ts","webpack:///./src/associations/many-to-one.ts","webpack:///./src/index.ts","webpack:///./src/state-manager.ts","webpack:///./src/state.ts","webpack:///./src/utils/set-config.ts","webpack:///external \"axios\"","webpack:///./src/utils/framework-detect.ts","webpack:///./src/decorators/one-to-one.ts","webpack:///./src/associations/one-to-one.ts","webpack:///./src/decorators/one-to-many.ts","webpack:///./src/decorators/many-to-many.ts","webpack:///./src/associations/many-to-many.ts","webpack:///./src/decorators/many-to-one.ts","webpack:///./src/decorators/path.ts","webpack:///./src/decorators/field.ts"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC7DA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,kBAAkB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,2BAA2B,6BAA6B;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,sEAAsE,EAAE;AACnH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,6BAA6B;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,2DAA2D;AAC3D;AACA;AACA;AACA;AACA,SAAS,EAAE,EAAE;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,uDAAuD,mDAAmD,EAAE;AAC5G;AACA,qCAAqC,oCAAoC,EAAE;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACzMA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACZA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA,gCAAgC,aAAa;AAC7C;AACA;AACA;AACA,CAAC;AACD;AACA;;;;;;;;ACbA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACvDA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,8BAA8B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC1DA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACjBA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,mDAAmD,EAAE;AACpH;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACxBA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,+DAA+D,mDAAmD,EAAE;AACpH;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,wBAAwB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,mBAAmB,EAAE;AAC1E;AACA;AACA,CAAC;AACD;;;;;;;;AC7EA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,eAAe;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACxBA,kC;;;;;;;ACAA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACRA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;;;;;;;ACrBA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACjDA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;;;;;;;ACtBA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;;;;;;;ACrBA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,8BAA8B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC7DA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;;;;;;;ACtBA;AACA,8CAA8C,cAAc;AAC5D;AACA,8BAA8B,kCAAkC;AAChE;AACA;;;;;;;;ACLA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"axios\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"promise-handler\", [\"axios\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"promise-handler\"] = factory(require(\"axios\"));\n\telse\n\t\troot[\"promise-handler\"] = factory(root[\"axios\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_9__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 968f06e69c2f758a7f16","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar state_manager_1 = require(\"./state-manager\");\n/*\nthis is the main Class (almost static) that allows us to\nconfigure server in case of REST API configuration or reactive\nfunctions (Vue)\n*/\nvar yongo_1 = require(\"./yongo\");\nvar Model = /** @class */ (function () {\n    function Model(data) {\n        if (data === void 0) { data = undefined; }\n        var _this = this;\n        this.className = '';\n        this.modifiedFields = {};\n        this.activationHandler = {};\n        this.actualHandler = {};\n        this.syncStatus = {\n            updating: false,\n            creating: false,\n            deleting: false,\n            pending: {\n                save: false,\n                create: true,\n            },\n            synced: false,\n        };\n        this.className = this.constructor.name;\n        this.path = Model.paths[this.className];\n        if (data.id) {\n            this.id = data.id;\n        }\n        if (data && Model.fields[this.className]) {\n            Object.keys(Model.fields[this.className]).forEach(function (key) {\n                if (_this[data]) {\n                    _this[key] = data[key];\n                }\n                else {\n                    _this[key] = Model.fields[_this.className].defaultValue;\n                }\n            });\n        }\n        var associations = Model.associations[this.className];\n        for (var index = 0; index < associations.length; index += 1) {\n            var associationField = associations[index].sourceProperty;\n            this[associationField] = data[associationField];\n        }\n    }\n    Model.fetch = function () {\n        var _this = this;\n        if (yongo_1.default.server) {\n            return yongo_1.default.server.get(this.prototype.path)\n                .then(function (response) { return _this.getState().addList(response.data, \"fetch\" + _this.name); });\n        }\n        return Promise.reject(new Error('There is no server configured'));\n    };\n    Model.addField = function (field, defaultValue) {\n        if (!Model.fields[this.name]) {\n            Model.fields[this.name] = {};\n        }\n        if (defaultValue) {\n            Model.fields[this.name][field] = {\n                defaultValue: defaultValue,\n            };\n        }\n    };\n    Model.getState = function () {\n        return this.stateManager.getState(this);\n    };\n    Model.addAssociation = function (association) {\n        if (!Model.associations[association.SourceClass.name]) {\n            Model.associations[association.SourceClass.name] = [];\n        }\n        Model.stateManager.getState(association.SourceClass);\n        Model.associations[association.SourceClass.name].push(association);\n    };\n    Model.getAssociations = function (className) {\n        if (this.associations[className]) {\n            return this.associations[className];\n        }\n        this.associations[className] = [];\n        return this.associations[className];\n    };\n    Model.prototype.setModifiedField = function (field, value) {\n        if (!this.syncStatus.pending.create) {\n            this.syncStatus.pending.save = true;\n            this.syncStatus.synced = false;\n            this.modifiedFields[field] = value;\n        }\n    };\n    Model.prototype.getStatus = function () {\n        return this.syncStatus;\n    };\n    Model.prototype.getProxy = function (proxy) {\n        return this.proxy;\n    };\n    Model.prototype.setProxy = function (proxy) {\n        this.proxy = proxy;\n    };\n    Model.prototype.setActivationProxy = function (activationHandler, handler) {\n        this.activationHandler = activationHandler;\n        this.actualHandler = handler;\n    };\n    Model.prototype.activateProxy = function () {\n        this.actualHandler.set = this.activationHandler.set;\n    };\n    Model.prototype.deactivateProxy = function () {\n        this.actualHandler.set = undefined;\n    };\n    Model.prototype.populate = function () {\n        var associations = Model.associations[this.className];\n        for (var index = 0; index < associations.length; index += 1) {\n            associations[index].apply(this);\n        }\n    };\n    Model.prototype.save = function () {\n        var _this = this;\n        if (this.syncStatus.deleting) {\n            throw new Error('This model is marked as deleting');\n        }\n        if (this.syncStatus.pending.create || this.syncStatus.synced) {\n            return Promise.resolve();\n        }\n        this.syncStatus.updating = true;\n        return yongo_1.default.server.put(this.path + \"/\" + this.id, this.modifiedFields)\n            .then(function (response) {\n            _this.syncStatus.updating = false;\n            return response;\n        });\n    };\n    Model.prototype.insert = function () {\n        var _this = this;\n        if (this.syncStatus.synced) {\n            throw new Error('The model is already synced.');\n        }\n        var associations = Model.associations[this.className];\n        var createModels = [];\n        var sendingModel = {};\n        Object.assign(sendingModel, this.getSimplifiedObject());\n        this.syncStatus.pending.create = false;\n        this.syncStatus.creating = true;\n        associations.forEach(function (association) {\n            if (!sendingModel[association.sourceTarget]) {\n                return;\n            }\n            if (association.isSourceList) {\n                var keys = Object.keys(sendingModel[association.sourceTarget]);\n                keys.forEach(function (key) {\n                    var target = sendingModel[association.sourceTarget][key];\n                    if (target.syncStatus.pending.create) {\n                        createModels.push(target.insert());\n                    }\n                });\n                sendingModel[association.sourceTarget] = keys;\n            }\n            else {\n                sendingModel[association.sourceTarget] = sendingModel[association.sourceTarget].id;\n            }\n        });\n        return Promise.all(createModels).then(function () { return yongo_1.default.server.post(_this.path, sendingModel)\n            .then(function (response) {\n            _this.syncStatus.creating = false;\n            Model.stateManager.getState(_this.constructor).addModel(_this);\n            return response;\n        }); });\n    };\n    Model.prototype.delete = function () {\n        var _this = this;\n        if (this.syncStatus.pending.create) {\n            throw new Error('The model is pending to creation.');\n        }\n        this.syncStatus.synced = false;\n        this.syncStatus.deleting = true;\n        return yongo_1.default.server.delete(this.path + \"/\" + this.id)\n            .then(function (response) {\n            _this.syncStatus.deleting = false;\n            Model.stateManager.getState(_this.constructor).removeModel(_this);\n            return response;\n        });\n    };\n    Model.prototype.getSimplifiedObject = function () {\n        var _this = this;\n        var privateFields = ['className', 'modifiedFields', 'activationHandler', 'actualHandler', 'syncStatus', 'path'];\n        var keys = Object.keys(this);\n        privateFields.forEach(function (privateField) { return keys.splice(keys.indexOf(privateField), 1); });\n        var simplifiedObject = {};\n        keys.forEach(function (key) { simplifiedObject[key] = _this[key]; });\n        return simplifiedObject;\n    };\n    Model.UPDATING = 'updating';\n    Model.INSERTING = 'inserting';\n    Model.PENDING_SAVE = 'pending_save';\n    Model.PENDING_CREATE = 'pending_create';\n    Model.SYNCED = 'synced';\n    Model.associations = {};\n    Model.paths = {};\n    Model.states = {};\n    Model.stateManager = new state_manager_1.default();\n    Model.fields = {};\n    return Model;\n}());\nexports.default = Model;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model.ts\n// module id = 0\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Association = /** @class */ (function () {\n    function Association(_a) {\n        var sourceProperty = _a.sourceProperty, targetProperty = _a.targetProperty, SourceClass = _a.SourceClass, TargetClass = _a.TargetClass;\n        this.sourceProperty = sourceProperty;\n        this.targetProperty = targetProperty;\n        this.TargetClass = TargetClass;\n        this.SourceClass = SourceClass;\n    }\n    return Association;\n}());\nexports.default = Association;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/associations/association.ts\n// module id = 1\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar set_config_1 = require(\"./utils/set-config\");\nvar Yongo = /** @class */ (function () {\n    function Yongo() {\n    }\n    Yongo.setConfig = function (config) {\n        if (config === void 0) { config = {}; }\n        set_config_1.default(this, config);\n    };\n    return Yongo;\n}());\nYongo.setConfig();\nexports.default = Yongo;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/yongo.ts\n// module id = 2\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar association_1 = require(\"./association\");\nvar model_1 = require(\"../model\");\nvar OneToMany = /** @class */ (function (_super) {\n    __extends(OneToMany, _super);\n    function OneToMany(_a) {\n        var sourceProperty = _a.sourceProperty, targetProperty = _a.targetProperty, SourceClass = _a.SourceClass, TargetClass = _a.TargetClass;\n        var _this = _super.call(this, {\n            sourceProperty: sourceProperty, targetProperty: targetProperty, SourceClass: SourceClass, TargetClass: TargetClass,\n        }) || this;\n        _this.defaultValue = undefined;\n        _this.isSourceList = false;\n        return _this;\n    }\n    OneToMany.prototype.apply = function (source) {\n        var target = source[this.sourceProperty];\n        if (!target) {\n            source[this.sourceProperty] = undefined;\n            return;\n        }\n        source.deactivateProxy();\n        var targetFound = model_1.default.stateManager.states[this.TargetClass.name][target.id];\n        if (targetFound) {\n            targetFound.deactivateProxy();\n            if (!targetFound[this.targetProperty]) {\n                targetFound[this.targetProperty] = {};\n            }\n            targetFound[this.targetProperty][source.id] = source.getProxy();\n            source[this.sourceProperty] = targetFound;\n            targetFound.activateProxy();\n        }\n        else {\n            if (!target[this.targetProperty]) {\n                target[this.targetProperty] = [];\n            }\n            target[this.targetProperty].push(source);\n            var targetCreated = model_1.default.stateManager.states[this.TargetClass.name].addObject(target);\n            source[this.sourceProperty] = targetCreated;\n            targetCreated.activateProxy();\n        }\n        source.activateProxy();\n    };\n    return OneToMany;\n}(association_1.default));\nexports.default = OneToMany;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/associations/one-to-many.ts\n// module id = 3\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar association_1 = require(\"./association\");\nvar model_1 = require(\"../model\");\nvar ManyToOne = /** @class */ (function (_super) {\n    __extends(ManyToOne, _super);\n    function ManyToOne(_a) {\n        var sourceProperty = _a.sourceProperty, targetProperty = _a.targetProperty, SourceClass = _a.SourceClass, TargetClass = _a.TargetClass;\n        var _this = _super.call(this, {\n            sourceProperty: sourceProperty, targetProperty: targetProperty, SourceClass: SourceClass, TargetClass: TargetClass,\n        }) || this;\n        _this.defaultValue = {};\n        _this.isSourceList = true;\n        return _this;\n    }\n    ManyToOne.prototype.apply = function (source) {\n        if (!source[this.sourceProperty]) {\n            source[this.sourceProperty] = {};\n            return;\n        }\n        source.deactivateProxy();\n        var listOfTargets = source[this.sourceProperty];\n        if (Array.isArray(listOfTargets)) {\n            source[this.sourceProperty] = {};\n        }\n        for (var index = 0; index < listOfTargets.length; index += 1) {\n            var target = listOfTargets[index];\n            var targetFound = model_1.default.stateManager.states[this.TargetClass.name][target.id];\n            if (targetFound) {\n                targetFound.deactivateProxy();\n                targetFound[this.targetProperty] = source.getProxy();\n                source[this.sourceProperty][targetFound.id] = targetFound;\n                targetFound.activateProxy();\n            }\n            else {\n                if (!target[this.targetProperty]) {\n                    target[this.targetProperty] = [];\n                }\n                target[this.targetProperty] = source;\n                var targetCreated = model_1.default.stateManager.states[this.TargetClass.name].addObject(target);\n                source[this.sourceProperty][targetCreated.id] = targetCreated;\n                targetCreated.activateProxy();\n            }\n        }\n        source.activateProxy();\n    };\n    return ManyToOne;\n}(association_1.default));\nexports.default = ManyToOne;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/associations/many-to-one.ts\n// module id = 4\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar model_1 = require(\"./model\");\nexports.Model = model_1.default;\nvar one_to_one_1 = require(\"./decorators/one-to-one\");\nexports.OneToOne = one_to_one_1.default;\nvar one_to_many_1 = require(\"./decorators/one-to-many\");\nexports.OneToMany = one_to_many_1.default;\nvar many_to_many_1 = require(\"./decorators/many-to-many\");\nexports.ManyToMany = many_to_many_1.default;\nvar many_to_one_1 = require(\"./decorators/many-to-one\");\nexports.ManyToOne = many_to_one_1.default;\nvar path_1 = require(\"./decorators/path\");\nexports.Path = path_1.default;\nvar field_1 = require(\"./decorators/field\");\nexports.Field = field_1.default;\nvar yongo_1 = require(\"./yongo\");\nexports.default = yongo_1.default;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/index.ts\n// module id = 5\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar state_1 = require(\"./state\");\nvar StateManager = /** @class */ (function () {\n    function StateManager() {\n        this.states = {};\n        this.stateHandler = {\n            ownKeys: function (target) {\n                var privateFields = ['Class', 'stateHandler'];\n                var keys = Object.keys(target);\n                privateFields.forEach(function (privateField) { return keys.splice(keys.indexOf(privateField), 1); });\n                return keys;\n            },\n        };\n    }\n    StateManager.prototype.getState = function (ModelClass) {\n        if (!this.states[ModelClass.name]) {\n            var state = new state_1.default(ModelClass);\n            this.states[ModelClass.name] = new Proxy(state, this.stateHandler);\n        }\n        return this.states[ModelClass.name];\n    };\n    return StateManager;\n}());\nexports.default = StateManager;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/state-manager.ts\n// module id = 6\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar yongo_1 = require(\"./yongo\");\nvar State = /** @class */ (function () {\n    function State(Class) {\n        this.stateHandler = {\n            set: function (target, property, value) {\n                target.setModifiedField(property, value);\n                return true;\n            },\n            ownKeys: function (target) {\n                var privateFields = ['className', 'modifiedFields', 'activationHandler', 'actualHandler', 'syncStatus', 'path'];\n                var keys = Object.keys(target);\n                privateFields.forEach(function (privateField) { return keys.splice(keys.indexOf(privateField), 1); });\n                return keys;\n            },\n        };\n        this.Class = Class;\n    }\n    State.prototype.addModel = function (model) {\n        this[model.id] = model;\n    };\n    State.prototype.removeModel = function (model) {\n        delete this[model.id];\n    };\n    State.prototype.addModels = function (models) {\n        for (var index = 0; index < models.length; index += 1) {\n            this[models[index].id] = models[index];\n        }\n    };\n    State.prototype.addObject = function (payload, method) {\n        var object = new this.Class(payload);\n        object.getStatus().pending.create = false;\n        object.getStatus().synced = true;\n        var handler = {};\n        object.setActivationProxy(this.stateHandler, handler);\n        var proxy = new Proxy(object, handler);\n        proxy.setProxy(proxy);\n        if (!yongo_1.default.reactFunction) {\n            this[object.id] = proxy;\n        }\n        else {\n            yongo_1.default.reactFunction(this, object.id, object);\n        }\n        object.populate();\n        return proxy;\n    };\n    State.prototype.addList = function (payload, method) {\n        var instances = [];\n        for (var index = 0; index < payload.length; index += 1) {\n            var object = new this.Class(payload[index]);\n            object.getStatus().pending.create = false;\n            object.getStatus().synced = true;\n            var handler = {};\n            object.setActivationProxy(this.stateHandler, handler);\n            var proxy = new Proxy(object, handler);\n            proxy.setProxy(proxy);\n            if (!yongo_1.default.reactFunction) {\n                this[object.id] = proxy;\n            }\n            else {\n                yongo_1.default.reactFunction(this, object.id, object);\n            }\n            object.populate();\n            instances.push(proxy);\n        }\n        return instances;\n    };\n    State.prototype.findById = function (id) {\n        return this[id];\n    };\n    State.prototype.getList = function () {\n        var _this = this;\n        return Object.keys(this).map(function (key) { return _this[key]; });\n    };\n    return State;\n}());\nexports.default = State;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/state.ts\n// module id = 7\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar axios_1 = require(\"axios\");\nvar framework_detect_1 = require(\"./framework-detect\");\nfunction setConfig(targetClass, config) {\n    if (config.baseUrl) {\n        targetClass.server = axios_1.default.create({\n            baseURL: config.baseUrl,\n        });\n    }\n    if (config.framework) {\n        switch (framework_detect_1.default(config.framework)) {\n            case 'Vue':\n                targetClass.reactFunction = config.framework.set;\n                break;\n            default:\n                targetClass.reactFunction = function (object, property, value) {\n                    return Object.defineProperty(object, property, { value: value });\n                };\n                break;\n        }\n    }\n    targetClass.stateManager = config.stateManager;\n}\nexports.default = setConfig;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/utils/set-config.ts\n// module id = 8\n// module chunks = 0","module.exports = require(\"axios\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"axios\"\n// module id = 9\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction frameworkDetect(framework) {\n    if (framework.name.indexOf('Vue') >= -1) {\n        return 'Vue';\n    }\n    return null;\n}\nexports.default = frameworkDetect;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/utils/framework-detect.ts\n// module id = 10\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar one_to_one_1 = require(\"../associations/one-to-one\");\nvar model_1 = require(\"../model\");\nfunction HasManyDecorator(TargetClass, _a) {\n    var sourceProperty = _a.sourceProperty, targetProperty = _a.targetProperty;\n    return function (SourceClass) {\n        model_1.default.addAssociation(new one_to_one_1.default({\n            sourceProperty: sourceProperty,\n            targetProperty: targetProperty,\n            SourceClass: SourceClass,\n            TargetClass: TargetClass,\n        }));\n        model_1.default.addAssociation(new one_to_one_1.default({\n            sourceProperty: targetProperty,\n            targetProperty: sourceProperty,\n            SourceClass: TargetClass,\n            TargetClass: SourceClass,\n        }));\n    };\n}\nexports.default = HasManyDecorator;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/decorators/one-to-one.ts\n// module id = 11\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar association_1 = require(\"./association\");\nvar model_1 = require(\"../model\");\nvar OneToOne = /** @class */ (function (_super) {\n    __extends(OneToOne, _super);\n    function OneToOne(_a) {\n        var sourceProperty = _a.sourceProperty, targetProperty = _a.targetProperty, SourceClass = _a.SourceClass, TargetClass = _a.TargetClass;\n        var _this = _super.call(this, {\n            sourceProperty: sourceProperty, targetProperty: targetProperty, SourceClass: SourceClass, TargetClass: TargetClass,\n        }) || this;\n        _this.defaultValue = undefined;\n        _this.isSourceList = false;\n        return _this;\n    }\n    OneToOne.prototype.apply = function (source) {\n        var target = source[this.sourceProperty];\n        if (!target) {\n            source[this.sourceProperty] = undefined;\n            return;\n        }\n        source.deactivateProxy();\n        var targetFound = model_1.default.stateManager.states[this.TargetClass.name][target.id];\n        if (targetFound) {\n            targetFound.deactivateProxy();\n            targetFound[this.targetProperty] = source.getProxy();\n            source[this.sourceProperty] = targetFound;\n            targetFound.activateProxy();\n        }\n        else {\n            target[this.targetProperty] = source;\n            var targetCreated = model_1.default.stateManager.states[this.TargetClass.name].addObject(target);\n            source[this.sourceProperty] = targetCreated;\n            targetCreated.activateProxy();\n        }\n        source.activateProxy();\n    };\n    return OneToOne;\n}(association_1.default));\nexports.default = OneToOne;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/associations/one-to-one.ts\n// module id = 12\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar one_to_many_1 = require(\"../associations/one-to-many\");\nvar many_to_one_1 = require(\"../associations/many-to-one\");\nvar model_1 = require(\"../model\");\nfunction HasManyDecorator(TargetClass, _a) {\n    var sourceProperty = _a.sourceProperty, targetProperty = _a.targetProperty;\n    return function (SourceClass) {\n        model_1.default.addAssociation(new one_to_many_1.default({\n            sourceProperty: sourceProperty,\n            targetProperty: targetProperty,\n            SourceClass: SourceClass,\n            TargetClass: TargetClass,\n        }));\n        model_1.default.addAssociation(new many_to_one_1.default({\n            sourceProperty: targetProperty,\n            targetProperty: sourceProperty,\n            SourceClass: TargetClass,\n            TargetClass: SourceClass,\n        }));\n    };\n}\nexports.default = HasManyDecorator;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/decorators/one-to-many.ts\n// module id = 13\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar many_to_many_1 = require(\"../associations/many-to-many\");\nvar model_1 = require(\"../model\");\nfunction HasManyDecorator(TargetClass, _a) {\n    var sourceProperty = _a.sourceProperty, targetProperty = _a.targetProperty;\n    return function (SourceClass) {\n        model_1.default.addAssociation(new many_to_many_1.default({\n            sourceProperty: sourceProperty,\n            targetProperty: targetProperty,\n            SourceClass: SourceClass,\n            TargetClass: TargetClass,\n        }));\n        model_1.default.addAssociation(new many_to_many_1.default({\n            sourceProperty: targetProperty,\n            targetProperty: sourceProperty,\n            SourceClass: TargetClass,\n            TargetClass: SourceClass,\n        }));\n    };\n}\nexports.default = HasManyDecorator;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/decorators/many-to-many.ts\n// module id = 14\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar association_1 = require(\"./association\");\nvar model_1 = require(\"../model\");\nvar ManyToMany = /** @class */ (function (_super) {\n    __extends(ManyToMany, _super);\n    function ManyToMany(_a) {\n        var sourceProperty = _a.sourceProperty, targetProperty = _a.targetProperty, SourceClass = _a.SourceClass, TargetClass = _a.TargetClass;\n        var _this = _super.call(this, {\n            sourceProperty: sourceProperty, targetProperty: targetProperty, SourceClass: SourceClass, TargetClass: TargetClass,\n        }) || this;\n        _this.defaultValue = {};\n        _this.isSourceList = true;\n        return _this;\n    }\n    ManyToMany.prototype.apply = function (source) {\n        if (!source[this.sourceProperty]) {\n            source[this.sourceProperty] = {};\n            return;\n        }\n        source.deactivateProxy();\n        var listOfTargets = source[this.sourceProperty];\n        if (Array.isArray(listOfTargets)) {\n            source[this.sourceProperty] = {};\n        }\n        for (var index = 0; index < listOfTargets.length; index += 1) {\n            var target = listOfTargets[index];\n            var targetFound = model_1.default.stateManager.states[this.TargetClass.name][target.id];\n            if (targetFound) {\n                targetFound.deactivateProxy();\n                if (!targetFound[this.targetProperty]) {\n                    targetFound[this.targetProperty] = {};\n                }\n                targetFound[this.targetProperty][source.id] = source.getProxy();\n                source[this.sourceProperty][targetFound.id] = targetFound;\n                targetFound.activateProxy();\n            }\n            else {\n                if (!target[this.targetProperty]) {\n                    target[this.targetProperty] = [];\n                }\n                target[this.targetProperty].push(source);\n                var targetCreated = model_1.default.stateManager.states[this.TargetClass.name].addObject(target);\n                source[this.sourceProperty][targetCreated.id] = targetCreated;\n                targetCreated.activateProxy();\n            }\n        }\n        source.activateProxy();\n    };\n    return ManyToMany;\n}(association_1.default));\nexports.default = ManyToMany;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/associations/many-to-many.ts\n// module id = 15\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar many_to_one_1 = require(\"../associations/many-to-one\");\nvar one_to_many_1 = require(\"../associations/one-to-many\");\nvar model_1 = require(\"../model\");\nfunction HasManyDecorator(TargetClass, _a) {\n    var sourceProperty = _a.sourceProperty, targetProperty = _a.targetProperty;\n    return function (SourceClass) {\n        model_1.default.addAssociation(new many_to_one_1.default({\n            sourceProperty: sourceProperty,\n            targetProperty: targetProperty,\n            SourceClass: SourceClass,\n            TargetClass: TargetClass,\n        }));\n        model_1.default.addAssociation(new one_to_many_1.default({\n            sourceProperty: targetProperty,\n            targetProperty: sourceProperty,\n            SourceClass: TargetClass,\n            TargetClass: SourceClass,\n        }));\n    };\n}\nexports.default = HasManyDecorator;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/decorators/many-to-one.ts\n// module id = 16\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction Path(path) {\n    return function (target) { target.paths[target.name] = path; };\n}\nexports.default = Path;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/decorators/path.ts\n// module id = 17\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction Field(defaultValue) {\n    return function (target, property) {\n        target.constructor.addField(property, defaultValue);\n    };\n}\nexports.default = Field;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/decorators/field.ts\n// module id = 18\n// module chunks = 0"],"sourceRoot":""}