{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 429712e975e00908b797","webpack:///./src/association.ts","webpack:///./src/index.ts","webpack:///./src/model.ts","webpack:///./src/utils/set-config.ts","webpack:///external \"axios\"","webpack:///./src/utils/framework-detect.ts","webpack:///./src/utils/apply-association.ts","webpack:///./src/has-many.ts","webpack:///./src/belongs-to-many.ts","webpack:///./src/belongs-to.ts","webpack:///./src/has-one.ts","webpack:///./src/path.ts","webpack:///./src/state.ts","webpack:///./src/field.ts"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC7DA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACVA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACjBA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA,8BAA8B,WAAW;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,8EAA8E,wDAAwD,EAAE;AACxI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACxFA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,iDAAiD,eAAe,EAAE;AAC5I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC5BA,kC;;;;;;;ACAA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACRA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACnBA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;;;;;;;ACZA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;;;;;;;ACdA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;;;;;;;ACdA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;;;;;;;ACZA;AACA,8CAA8C,cAAc;AAC5D;AACA,8BAA8B,qCAAqC;AACnE;AACA;;;;;;;;ACLA;AACA,8CAA8C,cAAc;AAC5D;AACA,2BAA2B,YAAY;AACvC;AACA;AACA;AACA;AACA;;;;;;;;ACRA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"axios\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"promise-handler\", [\"axios\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"promise-handler\"] = factory(require(\"axios\"));\n\telse\n\t\troot[\"promise-handler\"] = factory(root[\"axios\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 429712e975e00908b797","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Association = /** @class */ (function () {\n    function Association(options) {\n        this.property = options.property;\n        this.isList = options.isList;\n        this.targetClass = options.targetClass;\n    }\n    return Association;\n}());\nexports.default = Association;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/association.ts\n// module id = 0\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar model_1 = require(\"./model\");\nexports.Model = model_1.default;\nvar has_many_1 = require(\"./has-many\");\nexports.HasMany = has_many_1.default;\nvar belongs_to_many_1 = require(\"./belongs-to-many\");\nexports.BelongsToMany = belongs_to_many_1.default;\nvar belongs_to_1 = require(\"./belongs-to\");\nexports.BelongsTo = belongs_to_1.default;\nvar has_one_1 = require(\"./has-one\");\nexports.HasOne = has_one_1.default;\nvar path_1 = require(\"./path\");\nexports.Path = path_1.default;\nvar state_1 = require(\"./state\");\nexports.State = state_1.default;\nvar field_1 = require(\"./field\");\nexports.Field = field_1.default;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/index.ts\n// module id = 1\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar set_config_1 = require(\"./utils/set-config\");\nvar apply_association_1 = require(\"./utils/apply-association\");\nvar Model = /** @class */ (function () {\n    function Model(data) {\n        if (data === void 0) { data = {}; }\n        var _this = this;\n        this.className = '';\n        this.className = this.constructor['name'];\n        this.path = Model.paths[this.className];\n        if (Model.associations[this.className]) {\n            Model.associations[this.className].forEach(function (association) {\n                if (association.isList) {\n                    _this[association.name] = [];\n                }\n            });\n        }\n        Object.keys(data).forEach(function (key) {\n            _this[key] = data[key];\n        });\n    }\n    Model.setConfig = function (config) {\n        set_config_1.default(this, config);\n    };\n    Model.fetch = function () {\n        var _this = this;\n        if (this.server) {\n            return this.server.get(this.prototype.path)\n                .then(function (response) {\n                return _this.addListToState(\"fetch\" + _this['name'], response.data);\n            });\n        }\n        return Promise.reject(new Error('There is no server configured'));\n    };\n    Model.getState = function () {\n        if (this.states[this['name']]) {\n            return this.states[this['name']];\n        }\n        else {\n            this.states[this['name']] = {};\n            return this.states[this['name']];\n        }\n    };\n    Model.addAssociation = function (className, association) {\n        this.getAssociations(className).push(association);\n    };\n    Model.getAssociations = function (className) {\n        if (this.associations[className]) {\n            return this.associations[className];\n        }\n        this.associations[className] = [];\n        return this.associations[className];\n    };\n    Model.addToState = function (method, payload) {\n        if (this.stateManager) {\n            this.stateManager.commit(method, payload);\n        }\n        else {\n            this.reactFunction(this.getState(), payload.id, payload);\n        }\n    };\n    Model.addListToState = function (method, payload) {\n        var _this = this;\n        if (this.stateManager) {\n            return this.stateManager.commit(method, payload);\n        }\n        else {\n            payload.forEach(function (item) {\n                var object = new _this(item);\n                object.populate();\n                _this.reactFunction(_this.getState(), item.id, object);\n            });\n            return this.getState();\n        }\n    };\n    Model.prototype.populate = function () {\n        var _this = this;\n        Model.getAssociations(this.className).forEach(function (association) { return apply_association_1.default(_this, association); });\n    };\n    Model.prototype.save = function () {\n        return Model.server.post(this.path, JSON.parse(JSON.stringify(this)));\n    };\n    Model.associations = {};\n    Model.paths = {};\n    Model.states = {};\n    return Model;\n}());\nexports.default = Model;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model.ts\n// module id = 2\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar axios_1 = require(\"axios\");\nvar framework_detect_1 = require(\"./framework-detect\");\nfunction setConfig(model, config) {\n    if (config.baseUrl) {\n        model.server = axios_1.default.create({\n            baseURL: config.baseUrl,\n        });\n    }\n    if (config.framework) {\n        switch (framework_detect_1.default(config.framework)) {\n            case 'Vue':\n                model.reactFunction = config.framework.set;\n                break;\n            default:\n                model.reactFunction = function (object, property, value) { return Object.defineProperty(object, property, { value: value }); };\n                break;\n        }\n    }\n    else {\n        model.reactFunction = function (object, property, value) {\n            object[property] = value;\n            return object;\n        };\n    }\n    model.stateManager = config.stateManager;\n}\nexports.default = setConfig;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/utils/set-config.ts\n// module id = 3\n// module chunks = 0","module.exports = require(\"axios\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"axios\"\n// module id = 4\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction frameworkDetect(framework) {\n    if (framework.name.indexOf('Vue') >= -1) {\n        return 'Vue';\n    }\n    return null;\n}\nexports.default = frameworkDetect;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/utils/framework-detect.ts\n// module id = 5\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction applyAssociation(object, association) {\n    var TargetClass = association.targetClass;\n    if (association.isList) {\n        console.log(object, association, object[association.property]);\n        var list = object[association.property];\n        object[association.property] = list.map(function (item) {\n            var insertObject = new TargetClass(item);\n            TargetClass.reactFunction(TargetClass.getState(), item.id, insertObject);\n            return item.id;\n        });\n    }\n    else {\n        var insertObject = new TargetClass(object[association.property]);\n        TargetClass.reactFunction(TargetClass.getState(), insertObject.id, insertObject);\n        object[association.property] = insertObject.id;\n    }\n}\nexports.default = applyAssociation;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/utils/apply-association.ts\n// module id = 6\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar association_1 = require(\"./association\");\nfunction HasMany(targetClass, options) {\n    return function (target) {\n        target.addAssociation(target.name, new association_1.default({\n            isList: true,\n            property: options.property,\n            targetClass: targetClass,\n        }));\n    };\n}\nexports.default = HasMany;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/has-many.ts\n// module id = 7\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar association_1 = require(\"./association\");\nfunction BelongsToMany(targetClass) {\n    return function (target) {\n        var pluralEnding = target.name.endsWith('s') ? 'es' : 's';\n        var plural = \"\" + target.name.toLowerCase() + pluralEnding;\n        targetClass.addAssociation(new association_1.default({\n            isList: true,\n            property: plural,\n            class: target,\n        }));\n    };\n}\nexports.default = BelongsToMany;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/belongs-to-many.ts\n// module id = 8\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar association_1 = require(\"./association\");\nfunction BelongsTo(targetClass) {\n    return function (target) {\n        console.log(target);\n        var singular = target.name.toLowerCase();\n        targetClass.addAssociation(new association_1.default({\n            isList: false,\n            property: singular,\n            class: target,\n        }));\n    };\n}\nexports.default = BelongsTo;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/belongs-to.ts\n// module id = 9\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar association_1 = require(\"./association\");\nfunction HasOne(targetClass, options) {\n    return function (target) {\n        target.addAssociation(target.name, new association_1.default({\n            isList: false,\n            property: options.property,\n            targetClass: targetClass,\n        }));\n    };\n}\nexports.default = HasOne;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/has-one.ts\n// module id = 10\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction Path(path) {\n    return function (target) { target.paths[target['name']] = path; };\n}\nexports.default = Path;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/path.ts\n// module id = 11\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction State(state) {\n    if (state === void 0) { state = {}; }\n    return function (target) {\n        target.prototype.state = state;\n    };\n}\nexports.default = State;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/state.ts\n// module id = 12\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction Field() {\n    return function (target, property) {\n    };\n}\nexports.default = Field;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/field.ts\n// module id = 13\n// module chunks = 0"],"sourceRoot":""}